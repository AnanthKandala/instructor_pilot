{% load submission_extras %}
{% load static %}
<link rel="stylesheet" href="{% static 'assignments/style.css' %}">



  {% block content %}
  {% comment %} <div class="gradient-pattern"> {% endcomment %}

  <h3 class='mt-4'> {{ title }}</h3>
  <div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 row-cols-xxl-5 g-2 mt-5" id="submissions-row">
      {% for obj in object_list %}
      <div class="col">
        <div class="card h-100" data-pk="{{ obj.pk }}">
            {% comment %} add bootstrap carousel with all images (obj.submissions_papersubmissionimage_related.all){% endcomment %}
            <div 
            class="carousel slide"
            data-bs-ride="carousel"
            data-bs-pause="false"
            wrap="true"
            id="carousel-{{ forloop.counter }}">
              <div class="carousel-inner thumbnail">
                {% comment %} {% if obj.grade %}
                  <span class="position-relative top-100 start-50 translate-middle badge text-dark bg-warning">
                    {{obj.grade}}/{{obj.assignment.max_score}}
                  <span class="visually-hidden">Grade</span>
                {% endif %}   {% endcomment %}
                {% for img in obj.submissions_papersubmissionimage_related.all%}
                <div 
                  class="carousel-item{% if forloop.first %} active{% endif %}">
                      <img src="{{img.image.url}}" class="card-img-top sub-img" alt="{{img.name}}">
                </div>
                {% endfor %}
              </div>
              <button class="carousel-control-prev div-card-tools d-none" type="button" data-bs-target="#carousel-{{ forloop.counter }}" data-bs-slide="prev" style="z-index: 10;">
                <span class="carousel-control-prev-icon bg-dark" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
              </button>
              <button class="carousel-control-next div-card-tools d-none" type="button" data-bs-target="#carousel-{{ forloop.counter }}" data-bs-slide="next" style="z-index: 10;">
                <span class="carousel-control-next-icon bg-dark" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
              </button>

            </div>
            
              <div class="card-body">
                <h5 class="card-title">
                  {% if obj.student %}
                    <h5 class="card-title"> 
                      {% if obj.classification_type == "D"%}
                      <span class="badge bg-primary">{{obj.classification_type}}</span> 
                      
                      {% elif obj.classification_type == "M"%}
                      <span class="badge bg-warning">{{obj.classification_type}}</span> 

                      {% elif obj.classification_type == "W"%}
                      <span class="badge bg-info text-dark">{{obj.classification_type}}</span> 
                      
                      {% else %}
                      <span class="badge bg-danger">?</span> 
                      {% endif %}
                      
                      {{obj.student.first_name}} {{obj.student.last_name}} ({{obj.student.uni_id}})
                      
                    </h5>
                  {% else %}
                    <h5 class="card-title text-muted"> <i>No Student</i></h5>
                  {% endif %}
                  {% if obj.grade %}
                    {% for q_grade in obj.get_question_grades %}
                      <p class="card-text">
                        Question {{forloop.counter}} grade: {{q_grade}}
                      </p>
                    {% endfor %}
                  {% else %}
                    <p class="card-text">
                      <i>No Grade</i>
                    </p>
                  {% endif %}
                  
                  
                  <a href="{{obj.get_absolute_url}}" class="stretched-link"></a>

                  <div class="position-absolute top-0 end-0 div-card-tools d-none" style="z-index: 20;">
                    {% if obj.canvas_id %}
                      <a href="{{obj.canvas_url}}" class="btn btn-sm btn-outline-primary btn-canvas" style="z-index: 1;">
                        <img src="https://t2.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=http://canvas.instructure.com&size=48" style="width: 16px; height: 16px">
                      </a>
                    {% endif %}
                    <button class="btn btn-sm btn-outline-danger btn-delete-sub" data-pk="{{ obj.pk }}" style="z-index: 20;">
                      <i class="bi bi-trash"></i>
                    </button>
                  </div>
                  
              </div>
              <div class="card-footer" style="background: linear-gradient({{random_num|dj_iter}}deg, #e3dfd1, #d4cced);">
                <small>Last updated at {{obj.updated}}</small>
              </div>
              

        </div>
      </div>
      {% endfor %}
  </div>

{% endblock content %}
